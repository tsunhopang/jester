# Example configuration for spectral decomposition EOS inference with chiEFT likelihood
# This uses the spectral parametrization from Lindblom (2010) and Lackey & Wade (2018)

seed: 42

# Execution options
dry_run: false         # Set to false to run full MCMC sampling
validate_only: false

transform:
  type: spectral
  crust_name: SLy  # Required for spectral (LALSuite compatibility)
  n_points_high: 500  # Number of high-density points in spectral region
  ndat_TOV: 100
  nb_masses: 100
  min_nsat_TOV: 0.75

prior:
  specification_file: prior.prior

# Likelihood constraints
likelihoods:
  # Physical constraint likelihood - enforces EOS validity
  - type: "constraints_eos"
    enabled: true

  # Radio timing observations - constrain maximum TOV mass using observed pulsar masses
  - type: "radio"
    enabled: true
    parameters:
      pulsars:
      # TODO: double check the references here
        # PSR J1614-2230: 1.94 ± 0.06 M_☉
        # Demorest et al. (2010), Nature 467, 1081
        - name: "J1614"
          mass_mean: 1.94
          mass_std: 0.06

        # PSR J0740+6620: 2.08 ± 0.14 M_☉
        # Fonseca et al. (2021), ApJL 915, L12
        # Note: This is the radio timing constraint only
        # For NICER X-ray constraint on J0740, use nicer likelihood
        - name: "J0740"
          mass_mean: 2.08
          mass_std: 0.14

      # Number of mass points for numerical integration
      nb_masses: 100

# SMC configuration with Random Walk kernel
# Aggressive settings for high-quality radio timing inference
sampler:
  type: "smc-rw"  # SMC with Random Walk kernel
  n_particles: 5000          # Number of particles for full inference (AGGRESSIVE)
  n_mcmc_steps: 10            # MCMC steps per tempering level (AGGRESSIVE)
  target_ess: 0.9             # Target effective sample size (90%)
  random_walk_sigma: 0.05      # Initial sigma for Gaussian random walk
  target_acceptance: 0.8
  adaptation_rate: 0.3        # Adaptation rate for sigma tuning
  n_eos_samples: 5000         # Number of EOS samples to generate after inference
  output_dir: "./outdir/"

# Postprocessing configuration
postprocessing:
  enabled: true
  make_cornerplot: true
  make_massradius: true
  make_pressuredensity: true
