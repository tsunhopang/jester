# ChiEFT-only inference configuration
# SMC with NUTS kernel for constraining EOS using chiral effective field theory
# Data from Koehn et al., Phys.Rev.X 15 (2025) 2, 021014

seed: 44

# Execution options
dry_run: false
validate_only: false

transform:
  type: "metamodel_cse"
  ndat_metamodel: 100
  nmax_nsat: 25.0
  nb_CSE: 8
  min_nsat_TOV: 0.75
  ndat_TOV: 100
  nb_masses: 100
  crust_name: "DH"

# Prior specification file
prior:
  specification_file: "prior.prior"

# Likelihood constraints (only chiEFT + EOS constraints enabled)
likelihoods:
  # Physical constraint likelihood - enforces EOS validity
  - type: "constraints_eos"
    enabled: true

  # ChiEFT likelihood - constrains low-density EOS using chiral effective field theory
  - type: "chieft"
    enabled: true
    parameters:
      low_filename: "../../../../jesterTOV/inference/data/chiEFT/2402.04172/low.dat"
      high_filename: "../../../../jesterTOV/inference/data/chiEFT/2402.04172/high.dat"
      nb_n: 100

# SMC configuration with NUTS kernel
sampler:
  type: "smc"
  kernel_type: "nuts"        # NUTS kernel with Hessian-based mass matrix adaptation
  n_particles: 2000          # Number of particles for full inference
  n_mcmc_steps: 10           # MCMC steps per tempering level
  target_ess: 0.9            # Target effective sample size (90%)
  init_step_size: 0.01       # Initial step size for NUTS
  mass_matrix_base: 0.2      # Base value for diagonal mass matrix
  mass_matrix_param_scales: {}  # Per-parameter scaling (empty for uniform)
  target_acceptance: 0.7     # Target acceptance rate for NUTS
  adaptation_rate: 0.3       # Adaptation rate for step size tuning
  n_eos_samples: 2000        # Number of EOS samples to generate after inference
  output_dir: "./outdir/"

# Postprocessing configuration
postprocessing:
  enabled: true
  make_cornerplot: true
  make_massradius: true
  make_pressuredensity: true
