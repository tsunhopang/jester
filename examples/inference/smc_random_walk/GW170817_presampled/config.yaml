# GW170817-only inference configuration
# SMC with Random Walk kernel for constraining EOS using GW data
# Uses GWLikelihood (presampled masses - the default behavior)

seed: 43

# Execution options
dry_run: false
validate_only: false

# Transform configuration: MetaModel + CSE for high-density region
transform:
  type: "metamodel_cse"
  ndat_metamodel: 100
  nmax_nsat: 25.0
  nb_CSE: 8
  min_nsat_TOV: 0.75
  ndat_TOV: 100
  nb_masses: 100
  crust_name: "DH"

# Prior specification file
prior:
  specification_file: "prior.prior"

# Likelihood constraints
likelihoods:
  - type: "constraints_eos"
    enabled: true
  - type: "gw"  # GWLikelihood with presampled masses (default behavior)
    enabled: true
    parameters:
      events:
        - name: "GW170817"
          # model_dir is optional - uses preset path to flow trained on XP-NRTv3
      N_masses_evaluation: 10000  # Override default (2000). Large N recommended for GPU!
      N_masses_batch_size: 1000   # Default value, shown for reference
      seed: 42                     # Default value, shown for reference

# SMC configuration with Random Walk kernel
# Aggressive settings for high-quality GW inference
sampler:
  type: "smc"
  kernel_type: "random_walk"  # Gaussian random walk kernel with sigma adaptation
  n_particles: 5000          # Number of particles for full inference (AGGRESSIVE)
  n_mcmc_steps: 10            # MCMC steps per tempering level (AGGRESSIVE)
  target_ess: 0.9             # Target effective sample size (90%)
  random_walk_sigma: 0.05      # Initial sigma for Gaussian random walk
  target_acceptance: 0.8      # Target acceptance rate (lower than NUTS)
  adaptation_rate: 0.3        # Adaptation rate for sigma tuning
  n_eos_samples: 5000         # Number of EOS samples to generate after inference
  output_dir: "./outdir/"

# Postprocessing configuration
postprocessing:
  enabled: true
  make_cornerplot: true
  make_massradius: true
  make_pressuredensity: true
