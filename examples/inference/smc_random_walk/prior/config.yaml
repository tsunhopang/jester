# Sequential Monte Carlo (SMC) with Random Walk Kernel Configuration Example
# Uses BlackJAX SMC with adaptive tempering and Gaussian Random Walk kernel
# Sample from the prior for testing

seed: 43

# Execution options
dry_run: false        # Set to true to setup everything but not run sampler
validate_only: false  # Set to true to only validate configuration

# Transform configuration: MetaModel+CSE for EOS curves
transform:
  type: "metamodel_cse"
  ndat_metamodel: 100        # Number of data points for MetaModel interpolation
  nmax_nsat: 25.0            # Maximum density (in units of nsat) for MetaModel
  nb_CSE: 8                  # CSE extension with 8 parameters
  min_nsat_TOV: 0.75         # Minimum density for TOV integration
  ndat_TOV: 100              # Number of points for TOV integration
  nb_masses: 100             # Number of mass samples for M-R curve
  crust_name: "DH"           # Crust model (Douchin-Haensel)

# Prior specification file
prior:
  specification_file: "prior.prior"

# Likelihood constraints: Use zero likelihood for prior-only sampling
likelihoods:
  - type: "constraints_eos"
    enabled: true
  - type: "zero"
    enabled: true
    parameters: {}

# SMC configuration with Random Walk kernel
# Note: Prior-only sampling typically requires fewer particles and steps
sampler:
  type: "smc"
  kernel_type: "random_walk"  # Gaussian random walk kernel with sigma adaptation
  n_particles: 1000           # Number of particles for prior sampling
  n_mcmc_steps: 10            # MCMC steps per tempering level (more than NUTS)
  target_ess: 0.9             # Target effective sample size (90%)
  random_walk_sigma: 0.1      # Initial sigma for Gaussian random walk
  target_acceptance: 0.5      # Target acceptance rate (lower than NUTS)
  adaptation_rate: 0.3        # Adaptation rate for sigma tuning
  n_eos_samples: 1000         # Number of EOS samples to generate after inference
  output_dir: "./outdir/"

# Postprocessing configuration
postprocessing:
  enabled: true
  make_cornerplot: true
  make_massradius: true
  make_pressuredensity: true

# Data paths (none needed for prior-only sampling)
data_paths: {}
